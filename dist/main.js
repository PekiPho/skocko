(()=>{"use strict";var e={807:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RandomZnaci=void 0;var a=function(){function e(){this.brojevi=[-1,-1,-1,-1];for(var e=0;e<4;e++)this.brojevi[e]=Math.floor(6*Math.random())}return e.prototype.pokusaj=function(e){for(var t=!0,a=0;a<4;a++)e[a]!=this.brojevi[a]&&(t=!1);return t},e.prototype.dajBoje=function(e){for(var t=[0,0],a=[!1,!1,!1,!1],r=[0,0,0,0,0,0],s=0;s<4;s++)r[this.brojevi[s]]++;for(s=0;s<4;s++)e[s]==this.brojevi[s]&&(r[e[s]]--,a[s]=!0,t[0]++);for(s=0;s<4;s++)r[e[s]]>0&&!1===a[s]&&(r[e[s]]--,t[1]++);return t},e}();t.RandomZnaci=a},462:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=a(807),s=function(){function e(){this.currRow=0,this.kombinacija=new r.RandomZnaci}return e.prototype.generateMap=function(e){for(var t=this,a=0;a<6;a++){var r=document.createElement("div");r.classList.add("horizontalno");var s=document.createElement("div");s.classList.add("redLevo"),s.classList.add("red".concat(a));var o=document.createElement("div");o.classList.add("redDesno"),o.classList.add("red".concat(a));for(var n=function(e){var a=document.createElement("img");a.src="",a.classList.add("polje"),a.addEventListener("click",(function(){t.obrisi(a)})),s.appendChild(a),r.appendChild(s);var n=document.createElement("div");n.classList.add("guess"),n.style.backgroundColor="gray",o.appendChild(n),r.appendChild(o)},c=0;c<4;c++)n();e.appendChild(r)}var i=document.createElement("div");for(i.classList.add("redLevo"),a=0;a<4;a++){var d=document.createElement("img");d.src="",d.classList.add("polje"),d.classList.add("pobeda"),i.appendChild(d)}e.appendChild(i);var l=document.createElement("div");l.classList.add("znakovi");var u=function(e){var a=document.createElement("img");switch(a.classList.add("znak"),a.classList.add("".concat(e)),e){case 0:a.src="../assets/skocko.png";break;case 1:a.src="../assets/tref.png";break;case 2:a.src="../assets/pik.png";break;case 3:a.src="../assets/herc.png";break;case 4:a.src="../assets/karo.png";break;case 5:a.src="../assets/zvezda.png"}a.addEventListener("click",(function(){t.dodaj(a)})),l.appendChild(a)};for(a=0;a<6;a++)u(a);e.appendChild(l);var p=document.createElement("div");p.classList.add("btnContainer");var v=document.createElement("button");v.classList.add("dugme"),v.textContent="POGODI",v.addEventListener("click",(function(){t.pogadjaj()})),p.appendChild(v);var m=document.createElement("button");m.classList.add("dugme"),m.textContent="Nova Igra",m.addEventListener("click",(function(){t.reset()})),p.appendChild(m),e.appendChild(p)},e.prototype.dodaj=function(e){e.firstChild;for(var t=document.querySelector(".redLevo.red".concat(this.currRow)).children,a=0;a<t.length;a++)if(""==t[a].getAttribute("src")){t[a].setAttribute("src",e.src),t[a].setAttribute("class",e.className.split(" ")[1]);break}},e.prototype.pogadjaj=function(){for(var e=!1,t=[],a=document.querySelector(".redLevo.red".concat(this.currRow)).children,r=0;r<a.length;r++){if(""==a[r].getAttribute("src")){e=!0,t=[];break}t.push(parseInt(a[r].className.split(" ")[0]))}e||(this.kombinacija.pokusaj(t)?(this.oboji(t),this.prikaziKombinaciju(),this.currRow=-1):(this.oboji(t),this.currRow++,this.currRow>5&&this.prikaziKombinaciju()))},e.prototype.oboji=function(e){var t;t=this.kombinacija.dajBoje(e);for(var a=document.querySelector(".redDesno.red".concat(this.currRow)).children,r=0,s=0;s<a.length;s++)"background-color: gray;"==a[r].getAttribute("style")&&t[0]>0?(a[r++].setAttribute("style","background-color: red;"),t[0]--):t[1]>0&&"background-color: gray;"==a[r].getAttribute("style")&&(a[r++].setAttribute("style","background-color: yellow;"),t[1]--)},e.prototype.reset=function(){this.currRow=0,this.kombinacija=new r.RandomZnaci;var e=0;document.querySelectorAll(".redLevo>*").forEach((function(t){t.className="",t.classList.add("polje"),t.classList.add("polje".concat(e%4)),t.setAttribute("src","")})),e=0,document.querySelectorAll(".redDesno>*").forEach((function(e){e.setAttribute("style","background-color: gray;")}))},e.prototype.obrisi=function(e){e.parentElement.classList.contains("red".concat(this.currRow))&&(e.className="",e.classList.add("polje"),e.setAttribute("src",""))},e.prototype.prikaziKombinaciju=function(){var e=this.kombinacija.brojevi;document.querySelectorAll(".pobeda").forEach((function(t,a){switch(e[a]){case 0:t.src="../assets/skocko.png";break;case 1:t.src="../assets/tref.png";break;case 2:t.src="../assets/pik.png";break;case 3:t.src="../assets/herc.png";break;case 4:t.src="../assets/karo.png";break;case 5:t.src="../assets/zvezda.png"}}))},e.prototype.generateTimer=function(e){var t=document.createElement("div");t.classList.add("drugiCont"),t.textContent="60",e.appendChild(t);for(var a=0;a<2;a++){var r=document.createElement("div");r.classList.add("polukrug"),r.classList.add("pkb");var s=document.createElement("div");s.classList.add("polukrug"),s.classList.add("pkp"),s.style.zIndex="5",r.style.zIndex="5",1==a&&(r.style.transform="rotate(180deg)",r.style.zIndex="3",s.style.transform="rotate(180deg)",s.style.zIndex="3"),t.appendChild(r),t.appendChild(s)}e.appendChild(t)},e}();t.default=s}},t={};(new(function a(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,a),o.exports}(462).default)).generateMap(document.body)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVVDLElBQUksYUFDeEJpRCxFQUFVL0IsWUFBWSxLQUV0QnZCLEVBQVVZLFlBQVkwQyxHQUV0QixJQUFJLElBQUlyRSxFQUFFLEVBQUVBLEVBQUUsRUFBRUEsSUFBSSxDQUNoQixJQUFJc0UsRUFBVXJELFNBQVNDLGNBQWMsT0FDckNvRCxFQUFRbkQsVUFBVUMsSUFBSSxZQUN0QmtELEVBQVFuRCxVQUFVQyxJQUFJLE9BQ3RCLElBQUltRCxFQUFTdEQsU0FBU0MsY0FBYyxPQUNwQ3FELEVBQVNwRCxVQUFVQyxJQUFJLFlBQ3ZCbUQsRUFBU3BELFVBQVVDLElBQUksT0FHdkJtRCxFQUFTMUMsTUFBTTJDLE9BQU8sSUFDdEJGLEVBQVF6QyxNQUFNMkMsT0FBTyxJQUVmLEdBQUh4RSxJQUNDc0UsRUFBUXpDLE1BQU00QyxVQUFVLGlCQUN4QkgsRUFBUXpDLE1BQU0yQyxPQUFPLElBQ3JCRCxFQUFTMUMsTUFBTTRDLFVBQVUsaUJBQ3pCRixFQUFTMUMsTUFBTTJDLE9BQU8sS0FHMUJILEVBQVUxQyxZQUFZMkMsR0FDdEJELEVBQVUxQyxZQUFZNEMsRUFDMUIsQ0FDQXhELEVBQVVZLFlBQVkwQyxFQUMxQixFQUVKLEVBclFBLEcsY0NESUssRUFBMkIsQ0FBQyxHQ0V6QixJRENQLFNBQVNDLEVBQW9CQyxHQUU1QixJQUFJQyxFQUFlSCxFQUF5QkUsR0FDNUMsUUFBcUJFLElBQWpCRCxFQUNILE9BQU9BLEVBQWFFLFFBR3JCLElBQUlDLEVBQVNOLEVBQXlCRSxHQUFZLENBR2pERyxRQUFTLENBQUMsR0FPWCxPQUhBRSxFQUFvQkwsR0FBVUksRUFBUUEsRUFBT0QsUUFBU0osR0FHL0NLLEVBQU9ELE9BQ2YsQ0N0QkEsTUFHVyxVQUVUakUsWUFBWUcsU0FBU2lFLEsiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9za29ja28vLi9zcmMvbG9naWthLnRzIiwid2VicGFjazovL3Nrb2Nrby8uL3NyYy9tYXAudHMiLCJ3ZWJwYWNrOi8vc2tvY2tvL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3Nrb2Nrby8uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcclxuXHJcbmV4cG9ydCBjbGFzcyBSYW5kb21abmFjaXtcclxuICAgIGJyb2pldmk6bnVtYmVyW107XHJcblxyXG4gICAgY29uc3RydWN0b3IoKXtcclxuICAgICAgICB0aGlzLmJyb2pldmk9Wy0xLC0xLC0xLC0xXTtcclxuICAgICAgICBmb3IobGV0IGk9MDtpPDQ7aSsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5icm9qZXZpW2ldPU1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSo2KTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmJyb2pldmlbaV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBwb2t1c2FqKG5pejpudW1iZXJbXSl7XHJcbiAgICAgICAgbGV0IHZyZWRub3N0OmJvb2xlYW49dHJ1ZTtcclxuICAgICAgICBmb3IobGV0IGk9MDtpPDQ7aSsrKXtcclxuICAgICAgICAgICAgaWYobml6W2ldIT10aGlzLmJyb2pldmlbaV0pXHJcbiAgICAgICAgICAgICAgICB2cmVkbm9zdD1mYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHZyZWRub3N0O1xyXG4gICAgfVxyXG5cclxuICAgIGRhakJvamUobml6Om51bWJlcltdKTpudW1iZXJbXXtcclxuXHJcbiAgICAgICAgbGV0IGtvbmFjbmlOaXo9WzAsMF07IC8vIHRhY25vLCBwb3N0b2ppIG5hIGxvc2UgbWVzdG9cclxuICAgICAgICBsZXQgcG9tb2NuaU5pej1bZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2VdO1xyXG4gICAgICAgIGxldCBib2plTWFwYTpudW1iZXJbXT1bMCwwLDAsMCwwLDBdO1xyXG5cclxuICAgICAgICBmb3IobGV0IGk9MDtpPDQ7aSsrKVxyXG4gICAgICAgICAgICBib2plTWFwYVt0aGlzLmJyb2pldmlbaV1dKys7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yKGxldCBpPTA7aTw0O2krKyl7XHJcbiAgICAgICAgICAgIGlmKG5peltpXT09dGhpcy5icm9qZXZpW2ldKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGJvamVNYXBhW25peltpXV0tLTtcclxuICAgICAgICAgICAgICAgICAgICBwb21vY25pTml6W2ldPXRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAga29uYWNuaU5pelswXSsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IobGV0IGk9MDtpPDQ7aSsrKXtcclxuICAgICAgICAgICAgaWYoYm9qZU1hcGFbbml6W2ldXT4wICYmIHBvbW9jbmlOaXpbaV09PT1mYWxzZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBib2plTWFwYVtuaXpbaV1dLS07XHJcbiAgICAgICAgICAgICAgICAgICAga29uYWNuaU5pelsxXSsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGtvbmFjbmlOaXo7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBSYW5kb21abmFjaSB9IGZyb20gXCIuL2xvZ2lrYVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZXtcclxuICAgIGN1cnJSb3c6IG51bWJlcjtcclxuICAgIGtvbWJpbmFjaWphOmFueTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcigpe1xyXG4gICAgICAgIHRoaXMuY3VyclJvdz0wO1xyXG4gICAgICAgIHRoaXMua29tYmluYWNpamE9bmV3IFJhbmRvbVpuYWNpKCk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmtvbWJpbmFjaWphLmJyb2pldmkpO1xyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlTWFwKGNvbnRhaW5lcjpIVE1MRWxlbWVudCl7XHJcblxyXG4gICAgICAgIC8vdGhpcy5nZW5lcmF0ZVRpbWVyKGNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgIGZvcihsZXQgaT0wO2k8NjtpKyspe1xyXG4gICAgICAgICAgICBsZXQgcmVkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIHJlZC5jbGFzc0xpc3QuYWRkKFwiaG9yaXpvbnRhbG5vXCIpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGxldCByZWRMZXZvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICByZWRMZXZvLmNsYXNzTGlzdC5hZGQoJ3JlZExldm8nKTtcclxuICAgICAgICAgICAgcmVkTGV2by5jbGFzc0xpc3QuYWRkKGByZWQke2l9YCk7XHJcbiAgICBcclxuICAgICAgICAgICAgbGV0IHJlZERlc25vID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIHJlZERlc25vLmNsYXNzTGlzdC5hZGQoJ3JlZERlc25vJyk7XHJcbiAgICAgICAgICAgIHJlZERlc25vLmNsYXNzTGlzdC5hZGQoYHJlZCR7aX1gKTtcclxuICAgIFxyXG4gICAgICAgICAgICBmb3IobGV0IGo9MDtqPDQ7aisrKXtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgbGV0IHBvbGplU2xpa2E9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcbiAgICAgICAgICAgICAgICAvL2xldCBwb2xqZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIHBvbGplU2xpa2Euc3JjPVwiXCI7XHJcbiAgICAgICAgICAgICAgICAvL3BvbGplU2xpa2EuYWx0PVwiXCI7XHJcbiAgICAgICAgICAgICAgICAvL3BvbGplU2xpa2Eub25lcnJvcj1mdW5jdGlvbigpe3RoaXMuc3R5bGUuZGlzcGxheT0nbm9uZSc7fTtcclxuICAgICAgICAgICAgICAgIHBvbGplU2xpa2EuY2xhc3NMaXN0LmFkZChcInBvbGplXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vb3ZvXHJcbiAgICAgICAgICAgICAgICAvL3BvbGplU2xpa2EuY2xhc3NMaXN0LmFkZChgcG9samUke2p9YCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcG9samVTbGlrYS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCk9Pnt0aGlzLm9icmlzaShwb2xqZVNsaWthKTt9KTtcclxuICAgICAgICAgICAgICAgIC8vcG9samUuYXBwZW5kQ2hpbGQocG9samVTbGlrYSk7XHJcbiAgICAgICAgICAgICAgICByZWRMZXZvLmFwcGVuZENoaWxkKHBvbGplU2xpa2EpO1xyXG4gICAgICAgICAgICAgICAgcmVkLmFwcGVuZENoaWxkKHJlZExldm8pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGxldCBndWVzcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgZ3Vlc3MuY2xhc3NMaXN0LmFkZChcImd1ZXNzXCIpO1xyXG4gICAgICAgICAgICAgICAgZ3Vlc3Muc3R5bGUuYmFja2dyb3VuZENvbG9yPSBcImdyYXlcIjtcclxuICAgICAgICAgICAgICAgIHJlZERlc25vLmFwcGVuZENoaWxkKGd1ZXNzKTtcclxuICAgICAgICAgICAgICAgIHJlZC5hcHBlbmRDaGlsZChyZWREZXNubyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocmVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCByZWRMZXZvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHJlZExldm8uY2xhc3NMaXN0LmFkZCgncmVkTGV2bycpO1xyXG4gICAgICAgIGZvcihsZXQgaT0wO2k8NDtpKyspe1xyXG4gICAgICAgICAgICBsZXQgcG9iZWRhUG9samU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcbiAgICAgICAgICAgIHBvYmVkYVBvbGplLnNyYz1cIlwiO1xyXG4gICAgICAgICAgICBwb2JlZGFQb2xqZS5jbGFzc0xpc3QuYWRkKFwicG9samVcIik7XHJcbiAgICAgICAgICAgIHBvYmVkYVBvbGplLmNsYXNzTGlzdC5hZGQoXCJwb2JlZGFcIik7XHJcbiAgICAgICAgICAgIHJlZExldm8uYXBwZW5kQ2hpbGQocG9iZWRhUG9samUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocmVkTGV2byk7XHJcbiAgICBcclxuICAgICAgICBsZXQgem5ha292aT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB6bmFrb3ZpLmNsYXNzTGlzdC5hZGQoXCJ6bmFrb3ZpXCIpO1xyXG4gICAgXHJcbiAgICAgICAgZm9yKGxldCBpPTA7aTw2O2krKyl7XHJcbiAgICAgICAgICAgIC8vbGV0IHpuYWs6SFRNTERpdkVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBcclxuICAgIFxyXG4gICAgICAgICAgICBsZXQgaW1hZ2U9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcbiAgICAgICAgICAgIGltYWdlLmNsYXNzTGlzdC5hZGQoJ3puYWsnKTtcclxuICAgICAgICAgICAgaW1hZ2UuY2xhc3NMaXN0LmFkZChgJHtpfWApO1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoKGkpe1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBpbWFnZS5zcmM9Jy4uL2Fzc2V0cy9za29ja28ucG5nJzsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6IGltYWdlLnNyYz0nLi4vYXNzZXRzL3RyZWYucG5nJzsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6IGltYWdlLnNyYz0nLi4vYXNzZXRzL3Bpay5wbmcnOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMzogaW1hZ2Uuc3JjPScuLi9hc3NldHMvaGVyYy5wbmcnOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogaW1hZ2Uuc3JjPScuLi9hc3NldHMva2Fyby5wbmcnOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogaW1hZ2Uuc3JjPScuLi9hc3NldHMvenZlemRhLnBuZyc7IGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCgpPT57dGhpcy5kb2RhaihpbWFnZSk7fSk7XHJcbiAgICAgICAgICAgIHpuYWtvdmkuYXBwZW5kQ2hpbGQoaW1hZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoem5ha292aSk7XHJcbiAgICBcclxuICAgICAgICBsZXQgYnRuQ29udGFpbmVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGJ0bkNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdidG5Db250YWluZXInKTtcclxuICAgIFxyXG4gICAgICAgIGxldCBQb2dhZGphaj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICBQb2dhZGphai5jbGFzc0xpc3QuYWRkKCdkdWdtZScpO1xyXG4gICAgICAgIFBvZ2FkamFqLnRleHRDb250ZW50PVwiUE9HT0RJXCI7XHJcbiAgICAgICAgUG9nYWRqYWouYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsKCk9Pnt0aGlzLnBvZ2FkamFqKCk7fSk7XHJcbiAgICAgICAgYnRuQ29udGFpbmVyLmFwcGVuZENoaWxkKFBvZ2FkamFqKTtcclxuICAgIFxyXG4gICAgICAgIGxldCBub3ZhSWdyYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICBub3ZhSWdyYS5jbGFzc0xpc3QuYWRkKCdkdWdtZScpO1xyXG4gICAgICAgIG5vdmFJZ3JhLnRleHRDb250ZW50PVwiTm92YSBJZ3JhXCI7XHJcbiAgICAgICAgbm92YUlncmEuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsKCk9Pnt0aGlzLnJlc2V0KCk7fSk7XHJcbiAgICAgICAgYnRuQ29udGFpbmVyLmFwcGVuZENoaWxkKG5vdmFJZ3JhKTtcclxuICAgIFxyXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChidG5Db250YWluZXIpO1xyXG4gICAgXHJcbiAgICB9XHJcblxyXG4gICAgZG9kYWooZWw6SFRNTEltYWdlRWxlbWVudCk6dm9pZHtcclxuICAgICAgICBsZXQgc2xpa2E9ZWwuZmlyc3RDaGlsZDtcclxuXHJcbiAgICAgICAgbGV0IHRyZW5SZWQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLnJlZExldm8ucmVkJHt0aGlzLmN1cnJSb3d9YCkuY2hpbGRyZW47XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhgLnJlZExldm8ucmVkJHt0aGlzLmN1cnJSb3d9YCk7XHJcbiAgICAgICAgZm9yKGxldCBpPTA7aTx0cmVuUmVkLmxlbmd0aDtpKyspe1xyXG4gICAgICAgICAgICBpZih0cmVuUmVkW2ldLmdldEF0dHJpYnV0ZSgnc3JjJyk9PVwiXCIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRyZW5SZWRbaV0uc2V0QXR0cmlidXRlKCdzcmMnLGVsLnNyYyk7XHJcbiAgICAgICAgICAgICAgICB0cmVuUmVkW2ldLnNldEF0dHJpYnV0ZSgnY2xhc3MnLGVsLmNsYXNzTmFtZS5zcGxpdCgnICcpWzFdKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHBvZ2FkamFqKCk6dm9pZHtcclxuICAgICAgICBsZXQgY2hlY2tlcjpib29sZWFuPWZhbHNlO1xyXG4gICAgICAgIGxldCBuaXo6bnVtYmVyW10gPSBbXTtcclxuICAgICAgICBsZXQgdHJlbnV0bmlSZWQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLnJlZExldm8ucmVkJHt0aGlzLmN1cnJSb3d9YCkuY2hpbGRyZW47XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygpO1xyXG4gICAgICAgIGZvcihsZXQgaT0wO2k8dHJlbnV0bmlSZWQubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgIGlmKHRyZW51dG5pUmVkW2ldLmdldEF0dHJpYnV0ZSgnc3JjJyk9PVwiXCIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNoZWNrZXI9dHJ1ZTtcclxuICAgICAgICAgICAgICAgIG5pej1bXTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICBuaXoucHVzaChwYXJzZUludCh0cmVudXRuaVJlZFtpXS5jbGFzc05hbWUuc3BsaXQoJyAnKVswXSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vY29uc29sZS5sb2cobml6KTtcclxuICAgICAgICBpZighY2hlY2tlcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKHRoaXMua29tYmluYWNpamEucG9rdXNhaihuaXopKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub2Jvamkobml6KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaWthemlLb21iaW5hY2lqdSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VyclJvdz0tMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgIHRoaXMub2Jvamkobml6KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VyclJvdysrO1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5jdXJyUm93PjUpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmlrYXppS29tYmluYWNpanUoKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvYm9qaShuaXo6bnVtYmVyW10pe1xyXG4gICAgICAgIGxldCBuaXpCb2phOm51bWJlcltdO1xyXG4gICAgICAgIG5pekJvamE9IHRoaXMua29tYmluYWNpamEuZGFqQm9qZShuaXopO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coXCJrb21iaW5hY2lqYSBqZSBcIiArIHRoaXMua29tYmluYWNpamEuYnJvamV2aSk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhuaXpCb2phKTtcclxuXHJcbiAgICAgICAgbGV0IGd1ZXNzUmVkPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5yZWREZXNuby5yZWQke3RoaXMuY3VyclJvd31gKS5jaGlsZHJlbjtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKGd1ZXNzUmVkKTtcclxuICAgICAgICBsZXQgY29sb3JDb3VudGVyPTA7XHJcbiAgICAgICAgZm9yKGxldCBpPTA7aTxndWVzc1JlZC5sZW5ndGg7aSsrKXtcclxuICAgICAgICAgICAgaWYoZ3Vlc3NSZWRbY29sb3JDb3VudGVyXS5nZXRBdHRyaWJ1dGUoJ3N0eWxlJyk9PVwiYmFja2dyb3VuZC1jb2xvcjogZ3JheTtcIiAmJiBuaXpCb2phWzBdPjApe1xyXG4gICAgICAgICAgICAgICAgZ3Vlc3NSZWRbY29sb3JDb3VudGVyKytdLnNldEF0dHJpYnV0ZSgnc3R5bGUnLFwiYmFja2dyb3VuZC1jb2xvcjogcmVkO1wiKTtcclxuICAgICAgICAgICAgICAgIG5pekJvamFbMF0tLTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKG5pekJvamFbMV0+MCAmJiBndWVzc1JlZFtjb2xvckNvdW50ZXJdLmdldEF0dHJpYnV0ZSgnc3R5bGUnKT09XCJiYWNrZ3JvdW5kLWNvbG9yOiBncmF5O1wiKXtcclxuICAgICAgICAgICAgICAgIGd1ZXNzUmVkW2NvbG9yQ291bnRlcisrXS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJyxcImJhY2tncm91bmQtY29sb3I6IHllbGxvdztcIik7XHJcbiAgICAgICAgICAgICAgICBuaXpCb2phWzFdLS07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXQoKXtcclxuICAgICAgICB0aGlzLmN1cnJSb3c9MDtcclxuICAgICAgICB0aGlzLmtvbWJpbmFjaWphPW5ldyBSYW5kb21abmFjaSgpO1xyXG4gICAgICAgIGxldCBpPTA7XHJcbiAgICAgICAgbGV0IHpuYWtvdmlQb2xqYT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAucmVkTGV2bz4qYCk7XHJcblxyXG4gICAgICAgIHpuYWtvdmlQb2xqYS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTmFtZT1cIlwiO1xyXG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb2xqZVwiKTtcclxuICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGBwb2xqZSR7aSU0fWApO1xyXG4gICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShcInNyY1wiLFwiXCIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpPTA7XHJcbiAgICAgICAgbGV0IHpuYWtvdmlHdWVzcz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAucmVkRGVzbm8+KmApO1xyXG4gICAgICAgIHpuYWtvdmlHdWVzcy5mb3JFYWNoKGVsZW1lbnQ9PntcclxuICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJyxcImJhY2tncm91bmQtY29sb3I6IGdyYXk7XCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9icmlzaShlbDpIVE1MSW1hZ2VFbGVtZW50KXtcclxuICAgICAgICBsZXQgcm9kaXRlbGo9ZWwucGFyZW50RWxlbWVudDtcclxuICAgICAgICBpZihyb2RpdGVsai5jbGFzc0xpc3QuY29udGFpbnMoYHJlZCR7dGhpcy5jdXJyUm93fWApKXtcclxuICAgICAgICAgICAgZWwuY2xhc3NOYW1lPVwiXCI7XHJcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoXCJwb2xqZVwiKTtcclxuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKFwic3JjXCIsXCJcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vY29uc29sZS5sb2coZWwucGFyZW50RWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpa2F6aUtvbWJpbmFjaWp1KCl7XHJcbiAgICAgICAgbGV0IG5pejpudW1iZXJbXT10aGlzLmtvbWJpbmFjaWphLmJyb2pldmk7XHJcbiAgICAgICAgbGV0IHBvYmVkbmFQb2xqYT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9iZWRhJyk7XHJcbiAgICAgICAgcG9iZWRuYVBvbGphLmZvckVhY2goKHBvbGplOkhUTUxJbWFnZUVsZW1lbnQsaW5kZXgpPT57XHJcbiAgICAgICAgICAgIHN3aXRjaChuaXpbaW5kZXhdKXtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHBvbGplLnNyYz0nLi4vYXNzZXRzL3Nrb2Nrby5wbmcnOyBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IHBvbGplLnNyYz0nLi4vYXNzZXRzL3RyZWYucG5nJzsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiBwb2xqZS5zcmM9Jy4uL2Fzc2V0cy9waWsucG5nJzsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiBwb2xqZS5zcmM9Jy4uL2Fzc2V0cy9oZXJjLnBuZyc7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcG9samUuc3JjPScuLi9hc3NldHMva2Fyby5wbmcnOyBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6IHBvbGplLnNyYz0nLi4vYXNzZXRzL3p2ZXpkYS5wbmcnOyBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBnZW5lcmF0ZVRpbWVyKGNvbnRhaW5lcjpIVE1MRWxlbWVudCl7XHJcbiAgICAgICAgbGV0IGRydWdpQ29udD0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgZHJ1Z2lDb250LmNsYXNzTGlzdC5hZGQoXCJkcnVnaUNvbnRcIik7XHJcbiAgICAgICAgZHJ1Z2lDb250LnRleHRDb250ZW50PVwiNjBcIjtcclxuXHJcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGRydWdpQ29udCk7XHJcblxyXG4gICAgICAgIGZvcihsZXQgaT0wO2k8MjtpKyspe1xyXG4gICAgICAgICAgICBsZXQgYmVsaURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBiZWxpRGl2LmNsYXNzTGlzdC5hZGQoYHBvbHVrcnVnYCk7XHJcbiAgICAgICAgICAgIGJlbGlEaXYuY2xhc3NMaXN0LmFkZChcInBrYlwiKTtcclxuICAgICAgICAgICAgbGV0IHBsYXZpRGl2PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBwbGF2aURpdi5jbGFzc0xpc3QuYWRkKGBwb2x1a3J1Z2ApO1xyXG4gICAgICAgICAgICBwbGF2aURpdi5jbGFzc0xpc3QuYWRkKFwicGtwXCIpO1xyXG5cclxuXHJcbiAgICAgICAgICAgIHBsYXZpRGl2LnN0eWxlLnpJbmRleD1cIjVcIjtcclxuICAgICAgICAgICAgYmVsaURpdi5zdHlsZS56SW5kZXg9XCI1XCI7XHJcblxyXG4gICAgICAgICAgICBpZihpPT0xKXtcclxuICAgICAgICAgICAgICAgIGJlbGlEaXYuc3R5bGUudHJhbnNmb3JtPVwicm90YXRlKDE4MGRlZylcIjtcclxuICAgICAgICAgICAgICAgIGJlbGlEaXYuc3R5bGUuekluZGV4PVwiM1wiO1xyXG4gICAgICAgICAgICAgICAgcGxhdmlEaXYuc3R5bGUudHJhbnNmb3JtPVwicm90YXRlKDE4MGRlZylcIjtcclxuICAgICAgICAgICAgICAgIHBsYXZpRGl2LnN0eWxlLnpJbmRleD1cIjNcIjtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZHJ1Z2lDb250LmFwcGVuZENoaWxkKGJlbGlEaXYpO1xyXG4gICAgICAgICAgICBkcnVnaUNvbnQuYXBwZW5kQ2hpbGQocGxhdmlEaXYpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZHJ1Z2lDb250KTtcclxuICAgIH1cclxuICAgIFxyXG59XHJcblxyXG5cclxuXHJcbi8qZGEga29yaXN0aW0gaGFzaCBtYXB1IHphIHBhbWNlbmplIGJyb2pldmEgb2QgMC01IGkgb25kYSBwcnZpIHByb2xheiBha28gZWxlbWVudCBpelxyXG5uYXNlZyBwb2dhZGphbmphIGplZG5hayBlbGVtZW50dSBzbWFuanVqZW1vLCBpIHBydm8gcHJvbGF6aW1vIHRha28ga3JveiBuaXosb25kYSBlbGVtZW50aSBrb2ppIG5pc3UgbmEgbWVzdG9cclxucHJvZGplbW8gZGEgcGl0YW1vIGRhIGxpIHBvc3RvamUgdSBoYXNoIG1hcGkgZGEgYmkgem5hbGkgZGEgcG9zdG9qaSBhbGkgbmlqZSBuYSBtZXN0dVxyXG4qL1xyXG5cclxuLyogdHJlYmEgbWkgZGEgZG9kYW0gcmVkIGRhIHByaWthenVqZSB0YWNudSBrb21iaW5hY2lqdSwgem5hY2kgdHJlYmFtIGRhIHByb3ZlcmltIGkgYWtvXHJcbmplIHRhY25vIHByaWthenVqZW0gaSBha28gamUgYnJvaiByZWRvdmEgdmVjaSBvZCA1IG9uZGEgcHJpa2F6dWplbSBzdmFrYWtvKi8iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiaW1wb3J0IEdhbWUgZnJvbSAnLi9tYXAnO1xyXG5cclxuXHJcbmxldCBnPSBuZXcgR2FtZSgpO1xyXG5cclxuZy5nZW5lcmF0ZU1hcChkb2N1bWVudC5ib2R5KTtcclxuIl0sIm5hbWVzIjpbInRoaXMiLCJicm9qZXZpIiwiaSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInBva3VzYWoiLCJuaXoiLCJ2cmVkbm9zdCIsImRhakJvamUiLCJrb25hY25pTml6IiwicG9tb2NuaU5peiIsImJvamVNYXBhIiwiUmFuZG9tWm5hY2kiLCJjdXJyUm93Iiwia29tYmluYWNpamEiLCJnZW5lcmF0ZU1hcCIsImNvbnRhaW5lciIsInJlZCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInJlZERlc25vIiwiaiIsInBvbGplU2xpa2EiLCJzcmMiLCJhZGRFdmVudExpc3RlbmVyIiwib2JyaXNpIiwiYXBwZW5kQ2hpbGQiLCJndWVzcyIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwicmVkTGV2byIsInBvYmVkYVBvbGplIiwiem5ha292aSIsImltYWdlIiwiZG9kYWoiLCJidG5Db250YWluZXIiLCJQb2dhZGphaiIsInRleHRDb250ZW50IiwicG9nYWRqYWoiLCJub3ZhSWdyYSIsInJlc2V0IiwiZWwiLCJmaXJzdENoaWxkIiwidHJlblJlZCIsInF1ZXJ5U2VsZWN0b3IiLCJjaGlsZHJlbiIsImxlbmd0aCIsImdldEF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsImNsYXNzTmFtZSIsInNwbGl0IiwiY2hlY2tlciIsInRyZW51dG5pUmVkIiwicHVzaCIsInBhcnNlSW50Iiwib2JvamkiLCJwcmlrYXppS29tYmluYWNpanUiLCJuaXpCb2phIiwiZ3Vlc3NSZWQiLCJjb2xvckNvdW50ZXIiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImVsZW1lbnQiLCJwYXJlbnRFbGVtZW50IiwiY29udGFpbnMiLCJwb2xqZSIsImluZGV4IiwiZ2VuZXJhdGVUaW1lciIsImRydWdpQ29udCIsImJlbGlEaXYiLCJwbGF2aURpdiIsInpJbmRleCIsInRyYW5zZm9ybSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiYm9keSJdLCJzb3VyY2VSb290IjoiIn0=