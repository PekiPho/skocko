(()=>{"use strict";var e={807:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RandomZnaci=void 0;var a=function(){function e(){this.brojevi=[-1,-1,-1,-1];for(var e=0;e<4;e++)this.brojevi[e]=Math.floor(6*Math.random())}return e.prototype.pokusaj=function(e){for(var t=!0,a=0;a<4;a++)e[a]!=this.brojevi[a]&&(t=!1);return t},e.prototype.dajBoje=function(e){for(var t=[0,0],a=[!1,!1,!1,!1],r=[0,0,0,0,0,0],s=0;s<4;s++)r[this.brojevi[s]]++;for(s=0;s<4;s++)e[s]==this.brojevi[s]&&(r[e[s]]--,a[s]=!0,t[0]++);for(s=0;s<4;s++)r[e[s]]>0&&!1===a[s]&&(r[e[s]]--,t[1]++);return t},e}();t.RandomZnaci=a},462:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=a(807),s=function(){function e(){this.currRow=0,this.kombinacija=new r.RandomZnaci}return e.prototype.generateMap=function(e){for(var t=this,a=0;a<6;a++){var r=document.createElement("div");r.classList.add("horizontalno");var s=document.createElement("div");s.classList.add("redLevo"),s.classList.add("red".concat(a));var o=document.createElement("div");o.classList.add("redDesno"),o.classList.add("red".concat(a));for(var c=function(e){var a=document.createElement("img");a.src="",a.classList.add("polje"),a.addEventListener("click",(function(){t.obrisi(a)})),s.appendChild(a),r.appendChild(s);var c=document.createElement("div");c.classList.add("guess"),c.style.backgroundColor="gray",o.appendChild(c),r.appendChild(o)},n=0;n<4;n++)c();e.appendChild(r)}var i=document.createElement("div");for(i.classList.add("levred"),a=0;a<4;a++){var d=document.createElement("img");d.src="",d.classList.add("polje"),d.classList.add("pobeda"),i.appendChild(d)}e.appendChild(i);var l=document.createElement("div");l.classList.add("znakovi");var u=function(e){var a=document.createElement("img");switch(a.classList.add("znak"),a.classList.add("".concat(e)),e){case 0:a.src="../assets/skocko.png";break;case 1:a.src="../assets/tref.png";break;case 2:a.src="../assets/pik.png";break;case 3:a.src="../assets/herc.png";break;case 4:a.src="../assets/karo.png";break;case 5:a.src="../assets/zvezda.png"}a.addEventListener("click",(function(){t.dodaj(a)})),l.appendChild(a)};for(a=0;a<6;a++)u(a);e.appendChild(l);var p=document.createElement("div");p.classList.add("btnContainer");var v=document.createElement("button");v.classList.add("dugme"),v.textContent="POGODI",v.addEventListener("click",(function(){t.pogadjaj()})),p.appendChild(v);var m=document.createElement("button");m.classList.add("dugme"),m.textContent="Nova Igra",m.addEventListener("click",(function(){t.reset()})),p.appendChild(m),e.appendChild(p)},e.prototype.dodaj=function(e){e.firstChild;for(var t=document.querySelector(".redLevo.red".concat(this.currRow)).children,a=0;a<t.length;a++)if(""==t[a].getAttribute("src")){t[a].setAttribute("src",e.src),t[a].setAttribute("class",e.className.split(" ")[1]);break}},e.prototype.pogadjaj=function(){for(var e=!1,t=[],a=document.querySelector(".redLevo.red".concat(this.currRow)).children,r=0;r<a.length;r++){if(""==a[r].getAttribute("src")){e=!0,t=[];break}t.push(parseInt(a[r].className.split(" ")[0]))}e||(this.kombinacija.pokusaj(t)?(this.oboji(t),this.prikaziKombinaciju(),this.currRow=-1):(this.oboji(t),this.currRow++,this.currRow>5&&this.prikaziKombinaciju(),console.log(this.currRow)))},e.prototype.oboji=function(e){var t;t=this.kombinacija.dajBoje(e);for(var a=document.querySelector(".redDesno.red".concat(this.currRow)).children,r=0,s=0;s<a.length;s++)"background-color: gray;"==a[r].getAttribute("style")&&t[0]>0?(a[r++].setAttribute("style","background-color: red;"),t[0]--):t[1]>0&&"background-color: gray;"==a[r].getAttribute("style")&&(a[r++].setAttribute("style","background-color: yellow;"),t[1]--)},e.prototype.reset=function(){this.currRow=0,this.kombinacija=new r.RandomZnaci;var e=0,t=document.querySelectorAll(".redLevo>*"),a=document.querySelectorAll(".pobeda");t.forEach((function(t){t.className="",t.classList.add("polje"),t.classList.add("polje".concat(e%4)),t.setAttribute("src","")})),a.forEach((function(e){e.className="",e.classList.add("polje"),e.classList.add("pobeda"),e.setAttribute("src","")})),e=0,document.querySelectorAll(".redDesno>*").forEach((function(e){e.setAttribute("style","background-color: gray;")}))},e.prototype.obrisi=function(e){e.parentElement.classList.contains("red".concat(this.currRow))&&(e.className="",e.classList.add("polje"),e.setAttribute("src",""))},e.prototype.prikaziKombinaciju=function(){var e=this.kombinacija.brojevi;document.querySelectorAll(".pobeda").forEach((function(t,a){switch(e[a]){case 0:t.src="../assets/skocko.png";break;case 1:t.src="../assets/tref.png";break;case 2:t.src="../assets/pik.png";break;case 3:t.src="../assets/herc.png";break;case 4:t.src="../assets/karo.png";break;case 5:t.src="../assets/zvezda.png"}}))},e.prototype.generateTimer=function(e){var t=document.createElement("div");t.classList.add("drugiCont"),t.textContent="60",e.appendChild(t);for(var a=0;a<2;a++){var r=document.createElement("div");r.classList.add("polukrug"),r.classList.add("pkb");var s=document.createElement("div");s.classList.add("polukrug"),s.classList.add("pkp"),s.style.zIndex="5",r.style.zIndex="5",1==a&&(r.style.transform="rotate(180deg)",r.style.zIndex="3",s.style.transform="rotate(180deg)",s.style.zIndex="3"),t.appendChild(r),t.appendChild(s)}e.appendChild(t)},e}();t.default=s}},t={};(new(function a(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,a),o.exports}(462).default)).generateMap(document.body)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFBU0osR0FHL0NLLEVBQU9ELE9BQ2YsQ0N0QkEsTUFHVyxVQUVUckUsWUFBWUcsU0FBU3FFLEsiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9za29ja28vLi9zcmMvbG9naWthLnRzIiwid2VicGFjazovL3Nrb2Nrby8uL3NyYy9tYXAudHMiLCJ3ZWJwYWNrOi8vc2tvY2tvL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3Nrb2Nrby8uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcclxuXHJcbmV4cG9ydCBjbGFzcyBSYW5kb21abmFjaXtcclxuICAgIGJyb2pldmk6bnVtYmVyW107XHJcblxyXG4gICAgY29uc3RydWN0b3IoKXtcclxuICAgICAgICB0aGlzLmJyb2pldmk9Wy0xLC0xLC0xLC0xXTtcclxuICAgICAgICBmb3IobGV0IGk9MDtpPDQ7aSsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5icm9qZXZpW2ldPU1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSo2KTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmJyb2pldmlbaV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBwb2t1c2FqKG5pejpudW1iZXJbXSl7XHJcbiAgICAgICAgbGV0IHZyZWRub3N0OmJvb2xlYW49dHJ1ZTtcclxuICAgICAgICBmb3IobGV0IGk9MDtpPDQ7aSsrKXtcclxuICAgICAgICAgICAgaWYobml6W2ldIT10aGlzLmJyb2pldmlbaV0pXHJcbiAgICAgICAgICAgICAgICB2cmVkbm9zdD1mYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHZyZWRub3N0O1xyXG4gICAgfVxyXG5cclxuICAgIGRhakJvamUobml6Om51bWJlcltdKTpudW1iZXJbXXtcclxuXHJcbiAgICAgICAgbGV0IGtvbmFjbmlOaXo9WzAsMF07IC8vIHRhY25vLCBwb3N0b2ppIG5hIGxvc2UgbWVzdG9cclxuICAgICAgICBsZXQgcG9tb2NuaU5pej1bZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2VdO1xyXG4gICAgICAgIGxldCBib2plTWFwYTpudW1iZXJbXT1bMCwwLDAsMCwwLDBdO1xyXG5cclxuICAgICAgICBmb3IobGV0IGk9MDtpPDQ7aSsrKVxyXG4gICAgICAgICAgICBib2plTWFwYVt0aGlzLmJyb2pldmlbaV1dKys7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yKGxldCBpPTA7aTw0O2krKyl7XHJcbiAgICAgICAgICAgIGlmKG5peltpXT09dGhpcy5icm9qZXZpW2ldKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGJvamVNYXBhW25peltpXV0tLTtcclxuICAgICAgICAgICAgICAgICAgICBwb21vY25pTml6W2ldPXRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAga29uYWNuaU5pelswXSsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IobGV0IGk9MDtpPDQ7aSsrKXtcclxuICAgICAgICAgICAgaWYoYm9qZU1hcGFbbml6W2ldXT4wICYmIHBvbW9jbmlOaXpbaV09PT1mYWxzZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBib2plTWFwYVtuaXpbaV1dLS07XHJcbiAgICAgICAgICAgICAgICAgICAga29uYWNuaU5pelsxXSsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGtvbmFjbmlOaXo7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBSYW5kb21abmFjaSB9IGZyb20gXCIuL2xvZ2lrYVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZXtcclxuICAgIGN1cnJSb3c6IG51bWJlcjtcclxuICAgIGtvbWJpbmFjaWphOmFueTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcigpe1xyXG4gICAgICAgIHRoaXMuY3VyclJvdz0wO1xyXG4gICAgICAgIHRoaXMua29tYmluYWNpamE9bmV3IFJhbmRvbVpuYWNpKCk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmtvbWJpbmFjaWphLmJyb2pldmkpO1xyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlTWFwKGNvbnRhaW5lcjpIVE1MRWxlbWVudCl7XHJcblxyXG4gICAgICAgIC8vdGhpcy5nZW5lcmF0ZVRpbWVyKGNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgIGZvcihsZXQgaT0wO2k8NjtpKyspe1xyXG4gICAgICAgICAgICBsZXQgcmVkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIHJlZC5jbGFzc0xpc3QuYWRkKFwiaG9yaXpvbnRhbG5vXCIpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGxldCByZWRMZXZvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICByZWRMZXZvLmNsYXNzTGlzdC5hZGQoJ3JlZExldm8nKTtcclxuICAgICAgICAgICAgcmVkTGV2by5jbGFzc0xpc3QuYWRkKGByZWQke2l9YCk7XHJcbiAgICBcclxuICAgICAgICAgICAgbGV0IHJlZERlc25vID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIHJlZERlc25vLmNsYXNzTGlzdC5hZGQoJ3JlZERlc25vJyk7XHJcbiAgICAgICAgICAgIHJlZERlc25vLmNsYXNzTGlzdC5hZGQoYHJlZCR7aX1gKTtcclxuICAgIFxyXG4gICAgICAgICAgICBmb3IobGV0IGo9MDtqPDQ7aisrKXtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgbGV0IHBvbGplU2xpa2E9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcbiAgICAgICAgICAgICAgICAvL2xldCBwb2xqZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgIHBvbGplU2xpa2Euc3JjPVwiXCI7XHJcbiAgICAgICAgICAgICAgICAvL3BvbGplU2xpa2EuYWx0PVwiXCI7XHJcbiAgICAgICAgICAgICAgICAvL3BvbGplU2xpa2Eub25lcnJvcj1mdW5jdGlvbigpe3RoaXMuc3R5bGUuZGlzcGxheT0nbm9uZSc7fTtcclxuICAgICAgICAgICAgICAgIHBvbGplU2xpa2EuY2xhc3NMaXN0LmFkZChcInBvbGplXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vb3ZvXHJcbiAgICAgICAgICAgICAgICAvL3BvbGplU2xpa2EuY2xhc3NMaXN0LmFkZChgcG9samUke2p9YCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcG9samVTbGlrYS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCk9Pnt0aGlzLm9icmlzaShwb2xqZVNsaWthKTt9KTtcclxuICAgICAgICAgICAgICAgIC8vcG9samUuYXBwZW5kQ2hpbGQocG9samVTbGlrYSk7XHJcbiAgICAgICAgICAgICAgICByZWRMZXZvLmFwcGVuZENoaWxkKHBvbGplU2xpa2EpO1xyXG4gICAgICAgICAgICAgICAgcmVkLmFwcGVuZENoaWxkKHJlZExldm8pO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGxldCBndWVzcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgZ3Vlc3MuY2xhc3NMaXN0LmFkZChcImd1ZXNzXCIpO1xyXG4gICAgICAgICAgICAgICAgZ3Vlc3Muc3R5bGUuYmFja2dyb3VuZENvbG9yPSBcImdyYXlcIjtcclxuICAgICAgICAgICAgICAgIHJlZERlc25vLmFwcGVuZENoaWxkKGd1ZXNzKTtcclxuICAgICAgICAgICAgICAgIHJlZC5hcHBlbmRDaGlsZChyZWREZXNubyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocmVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCByZWRMZXZvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHJlZExldm8uY2xhc3NMaXN0LmFkZCgnbGV2cmVkJyk7XHJcbiAgICAgICAgZm9yKGxldCBpPTA7aTw0O2krKyl7XHJcbiAgICAgICAgICAgIGxldCBwb2JlZGFQb2xqZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuICAgICAgICAgICAgcG9iZWRhUG9samUuc3JjPVwiXCI7XHJcbiAgICAgICAgICAgIHBvYmVkYVBvbGplLmNsYXNzTGlzdC5hZGQoXCJwb2xqZVwiKTtcclxuICAgICAgICAgICAgcG9iZWRhUG9samUuY2xhc3NMaXN0LmFkZChcInBvYmVkYVwiKTtcclxuICAgICAgICAgICAgcmVkTGV2by5hcHBlbmRDaGlsZChwb2JlZGFQb2xqZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyZWRMZXZvKTtcclxuICAgIFxyXG4gICAgICAgIGxldCB6bmFrb3ZpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHpuYWtvdmkuY2xhc3NMaXN0LmFkZChcInpuYWtvdmlcIik7XHJcbiAgICBcclxuICAgICAgICBmb3IobGV0IGk9MDtpPDY7aSsrKXtcclxuICAgICAgICAgICAgLy9sZXQgem5hazpIVE1MRGl2RWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIFxyXG4gICAgXHJcbiAgICAgICAgICAgIGxldCBpbWFnZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuICAgICAgICAgICAgaW1hZ2UuY2xhc3NMaXN0LmFkZCgnem5haycpO1xyXG4gICAgICAgICAgICBpbWFnZS5jbGFzc0xpc3QuYWRkKGAke2l9YCk7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2goaSl7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGltYWdlLnNyYz0nLi4vYXNzZXRzL3Nrb2Nrby5wbmcnOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMTogaW1hZ2Uuc3JjPScuLi9hc3NldHMvdHJlZi5wbmcnOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMjogaW1hZ2Uuc3JjPScuLi9hc3NldHMvcGlrLnBuZyc7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOiBpbWFnZS5zcmM9Jy4uL2Fzc2V0cy9oZXJjLnBuZyc7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBpbWFnZS5zcmM9Jy4uL2Fzc2V0cy9rYXJvLnBuZyc7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBpbWFnZS5zcmM9Jy4uL2Fzc2V0cy96dmV6ZGEucG5nJzsgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgICBpbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCk9Pnt0aGlzLmRvZGFqKGltYWdlKTt9KTtcclxuICAgICAgICAgICAgem5ha292aS5hcHBlbmRDaGlsZChpbWFnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh6bmFrb3ZpKTtcclxuICAgIFxyXG4gICAgICAgIGxldCBidG5Db250YWluZXI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgYnRuQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2J0bkNvbnRhaW5lcicpO1xyXG4gICAgXHJcbiAgICAgICAgbGV0IFBvZ2FkamFqPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgIFBvZ2FkamFqLmNsYXNzTGlzdC5hZGQoJ2R1Z21lJyk7XHJcbiAgICAgICAgUG9nYWRqYWoudGV4dENvbnRlbnQ9XCJQT0dPRElcIjtcclxuICAgICAgICBQb2dhZGphai5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwoKT0+e3RoaXMucG9nYWRqYWooKTt9KTtcclxuICAgICAgICBidG5Db250YWluZXIuYXBwZW5kQ2hpbGQoUG9nYWRqYWopO1xyXG4gICAgXHJcbiAgICAgICAgbGV0IG5vdmFJZ3JhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgIG5vdmFJZ3JhLmNsYXNzTGlzdC5hZGQoJ2R1Z21lJyk7XHJcbiAgICAgICAgbm92YUlncmEudGV4dENvbnRlbnQ9XCJOb3ZhIElncmFcIjtcclxuICAgICAgICBub3ZhSWdyYS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwoKT0+e3RoaXMucmVzZXQoKTt9KTtcclxuICAgICAgICBidG5Db250YWluZXIuYXBwZW5kQ2hpbGQobm92YUlncmEpO1xyXG4gICAgXHJcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGJ0bkNvbnRhaW5lcik7XHJcbiAgICBcclxuICAgIH1cclxuXHJcbiAgICBkb2RhaihlbDpIVE1MSW1hZ2VFbGVtZW50KTp2b2lke1xyXG4gICAgICAgIGxldCBzbGlrYT1lbC5maXJzdENoaWxkO1xyXG5cclxuICAgICAgICBsZXQgdHJlblJlZD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAucmVkTGV2by5yZWQke3RoaXMuY3VyclJvd31gKS5jaGlsZHJlbjtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKGAucmVkTGV2by5yZWQke3RoaXMuY3VyclJvd31gKTtcclxuICAgICAgICBmb3IobGV0IGk9MDtpPHRyZW5SZWQubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgIGlmKHRyZW5SZWRbaV0uZ2V0QXR0cmlidXRlKCdzcmMnKT09XCJcIilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdHJlblJlZFtpXS5zZXRBdHRyaWJ1dGUoJ3NyYycsZWwuc3JjKTtcclxuICAgICAgICAgICAgICAgIHRyZW5SZWRbaV0uc2V0QXR0cmlidXRlKCdjbGFzcycsZWwuY2xhc3NOYW1lLnNwbGl0KCcgJylbMV0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcG9nYWRqYWooKTp2b2lke1xyXG4gICAgICAgIGxldCBjaGVja2VyOmJvb2xlYW49ZmFsc2U7XHJcbiAgICAgICAgbGV0IG5pejpudW1iZXJbXSA9IFtdO1xyXG4gICAgICAgIGxldCB0cmVudXRuaVJlZD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAucmVkTGV2by5yZWQke3RoaXMuY3VyclJvd31gKS5jaGlsZHJlbjtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCk7XHJcbiAgICAgICAgZm9yKGxldCBpPTA7aTx0cmVudXRuaVJlZC5sZW5ndGg7aSsrKXtcclxuICAgICAgICAgICAgaWYodHJlbnV0bmlSZWRbaV0uZ2V0QXR0cmlidXRlKCdzcmMnKT09XCJcIilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2hlY2tlcj10cnVlO1xyXG4gICAgICAgICAgICAgICAgbml6PVtdO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgIG5pei5wdXNoKHBhcnNlSW50KHRyZW51dG5pUmVkW2ldLmNsYXNzTmFtZS5zcGxpdCgnICcpWzBdKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhuaXopO1xyXG4gICAgICAgIGlmKCFjaGVja2VyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYodGhpcy5rb21iaW5hY2lqYS5wb2t1c2FqKG5peikpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vYm9qaShuaXopO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpa2F6aUtvbWJpbmFjaWp1KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyUm93PS0xO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vYm9qaShuaXopO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyUm93Kys7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLmN1cnJSb3c+NSlcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByaWthemlLb21iaW5hY2lqdSgpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5jdXJyUm93KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb2Jvamkobml6Om51bWJlcltdKXtcclxuICAgICAgICBsZXQgbml6Qm9qYTpudW1iZXJbXTtcclxuICAgICAgICBuaXpCb2phPSB0aGlzLmtvbWJpbmFjaWphLmRhakJvamUobml6KTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKFwia29tYmluYWNpamEgamUgXCIgKyB0aGlzLmtvbWJpbmFjaWphLmJyb2pldmkpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2cobml6Qm9qYSk7XHJcblxyXG4gICAgICAgIGxldCBndWVzc1JlZD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAucmVkRGVzbm8ucmVkJHt0aGlzLmN1cnJSb3d9YCkuY2hpbGRyZW47XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhndWVzc1JlZCk7XHJcbiAgICAgICAgbGV0IGNvbG9yQ291bnRlcj0wO1xyXG4gICAgICAgIGZvcihsZXQgaT0wO2k8Z3Vlc3NSZWQubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgIGlmKGd1ZXNzUmVkW2NvbG9yQ291bnRlcl0uZ2V0QXR0cmlidXRlKCdzdHlsZScpPT1cImJhY2tncm91bmQtY29sb3I6IGdyYXk7XCIgJiYgbml6Qm9qYVswXT4wKXtcclxuICAgICAgICAgICAgICAgIGd1ZXNzUmVkW2NvbG9yQ291bnRlcisrXS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJyxcImJhY2tncm91bmQtY29sb3I6IHJlZDtcIik7XHJcbiAgICAgICAgICAgICAgICBuaXpCb2phWzBdLS07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZihuaXpCb2phWzFdPjAgJiYgZ3Vlc3NSZWRbY29sb3JDb3VudGVyXS5nZXRBdHRyaWJ1dGUoJ3N0eWxlJyk9PVwiYmFja2dyb3VuZC1jb2xvcjogZ3JheTtcIil7XHJcbiAgICAgICAgICAgICAgICBndWVzc1JlZFtjb2xvckNvdW50ZXIrK10uc2V0QXR0cmlidXRlKCdzdHlsZScsXCJiYWNrZ3JvdW5kLWNvbG9yOiB5ZWxsb3c7XCIpO1xyXG4gICAgICAgICAgICAgICAgbml6Qm9qYVsxXS0tO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0KCl7XHJcbiAgICAgICAgdGhpcy5jdXJyUm93PTA7XHJcbiAgICAgICAgdGhpcy5rb21iaW5hY2lqYT1uZXcgUmFuZG9tWm5hY2koKTtcclxuICAgICAgICBsZXQgaT0wO1xyXG4gICAgICAgIGxldCB6bmFrb3ZpUG9samE9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgLnJlZExldm8+KmApO1xyXG4gICAgICAgIGxldCBwb2JlZGFQb2xqYT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvYmVkYVwiKTtcclxuXHJcbiAgICAgICAgem5ha292aVBvbGphLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lPVwiXCI7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvbGplXCIpO1xyXG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoYHBvbGplJHtpJTR9YCk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwic3JjXCIsXCJcIik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHBvYmVkYVBvbGphLmZvckVhY2goZWw9PntcclxuICAgICAgICAgICAgZWwuY2xhc3NOYW1lPVwiXCI7XHJcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoXCJwb2xqZVwiKTtcclxuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZChcInBvYmVkYVwiKTtcclxuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKFwic3JjXCIsXCJcIik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGk9MDtcclxuICAgICAgICBsZXQgem5ha292aUd1ZXNzPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYC5yZWREZXNubz4qYCk7XHJcbiAgICAgICAgem5ha292aUd1ZXNzLmZvckVhY2goZWxlbWVudD0+e1xyXG4gICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnc3R5bGUnLFwiYmFja2dyb3VuZC1jb2xvcjogZ3JheTtcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb2JyaXNpKGVsOkhUTUxJbWFnZUVsZW1lbnQpe1xyXG4gICAgICAgIGxldCByb2RpdGVsaj1lbC5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgIGlmKHJvZGl0ZWxqLmNsYXNzTGlzdC5jb250YWlucyhgcmVkJHt0aGlzLmN1cnJSb3d9YCkpe1xyXG4gICAgICAgICAgICBlbC5jbGFzc05hbWU9XCJcIjtcclxuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZChcInBvbGplXCIpO1xyXG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoXCJzcmNcIixcIlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhlbC5wYXJlbnRFbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBwcmlrYXppS29tYmluYWNpanUoKXtcclxuICAgICAgICBsZXQgbml6Om51bWJlcltdPXRoaXMua29tYmluYWNpamEuYnJvamV2aTtcclxuICAgICAgICBsZXQgcG9iZWRuYVBvbGphPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb2JlZGEnKTtcclxuICAgICAgICBwb2JlZG5hUG9samEuZm9yRWFjaCgocG9samU6SFRNTEltYWdlRWxlbWVudCxpbmRleCk9PntcclxuICAgICAgICAgICAgc3dpdGNoKG5peltpbmRleF0pe1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcG9samUuc3JjPScuLi9hc3NldHMvc2tvY2tvLnBuZyc7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTogcG9samUuc3JjPScuLi9hc3NldHMvdHJlZi5wbmcnOyBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHBvbGplLnNyYz0nLi4vYXNzZXRzL3Bpay5wbmcnOyBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHBvbGplLnNyYz0nLi4vYXNzZXRzL2hlcmMucG5nJzsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiBwb2xqZS5zcmM9Jy4uL2Fzc2V0cy9rYXJvLnBuZyc7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTogcG9samUuc3JjPScuLi9hc3NldHMvenZlemRhLnBuZyc7IGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGdlbmVyYXRlVGltZXIoY29udGFpbmVyOkhUTUxFbGVtZW50KXtcclxuICAgICAgICBsZXQgZHJ1Z2lDb250PSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBkcnVnaUNvbnQuY2xhc3NMaXN0LmFkZChcImRydWdpQ29udFwiKTtcclxuICAgICAgICBkcnVnaUNvbnQudGV4dENvbnRlbnQ9XCI2MFwiO1xyXG5cclxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZHJ1Z2lDb250KTtcclxuXHJcbiAgICAgICAgZm9yKGxldCBpPTA7aTwyO2krKyl7XHJcbiAgICAgICAgICAgIGxldCBiZWxpRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGJlbGlEaXYuY2xhc3NMaXN0LmFkZChgcG9sdWtydWdgKTtcclxuICAgICAgICAgICAgYmVsaURpdi5jbGFzc0xpc3QuYWRkKFwicGtiXCIpO1xyXG4gICAgICAgICAgICBsZXQgcGxhdmlEaXY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIHBsYXZpRGl2LmNsYXNzTGlzdC5hZGQoYHBvbHVrcnVnYCk7XHJcbiAgICAgICAgICAgIHBsYXZpRGl2LmNsYXNzTGlzdC5hZGQoXCJwa3BcIik7XHJcblxyXG5cclxuICAgICAgICAgICAgcGxhdmlEaXYuc3R5bGUuekluZGV4PVwiNVwiO1xyXG4gICAgICAgICAgICBiZWxpRGl2LnN0eWxlLnpJbmRleD1cIjVcIjtcclxuXHJcbiAgICAgICAgICAgIGlmKGk9PTEpe1xyXG4gICAgICAgICAgICAgICAgYmVsaURpdi5zdHlsZS50cmFuc2Zvcm09XCJyb3RhdGUoMTgwZGVnKVwiO1xyXG4gICAgICAgICAgICAgICAgYmVsaURpdi5zdHlsZS56SW5kZXg9XCIzXCI7XHJcbiAgICAgICAgICAgICAgICBwbGF2aURpdi5zdHlsZS50cmFuc2Zvcm09XCJyb3RhdGUoMTgwZGVnKVwiO1xyXG4gICAgICAgICAgICAgICAgcGxhdmlEaXYuc3R5bGUuekluZGV4PVwiM1wiO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkcnVnaUNvbnQuYXBwZW5kQ2hpbGQoYmVsaURpdik7XHJcbiAgICAgICAgICAgIGRydWdpQ29udC5hcHBlbmRDaGlsZChwbGF2aURpdik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChkcnVnaUNvbnQpO1xyXG4gICAgfVxyXG4gICAgXHJcbn1cclxuXHJcblxyXG5cclxuLypkYSBrb3Jpc3RpbSBoYXNoIG1hcHUgemEgcGFtY2VuamUgYnJvamV2YSBvZCAwLTUgaSBvbmRhIHBydmkgcHJvbGF6IGFrbyBlbGVtZW50IGl6XHJcbm5hc2VnIHBvZ2FkamFuamEgamVkbmFrIGVsZW1lbnR1IHNtYW5qdWplbW8sIGkgcHJ2byBwcm9sYXppbW8gdGFrbyBrcm96IG5peixvbmRhIGVsZW1lbnRpIGtvamkgbmlzdSBuYSBtZXN0b1xyXG5wcm9kamVtbyBkYSBwaXRhbW8gZGEgbGkgcG9zdG9qZSB1IGhhc2ggbWFwaSBkYSBiaSB6bmFsaSBkYSBwb3N0b2ppIGFsaSBuaWplIG5hIG1lc3R1XHJcbiovXHJcblxyXG4vKiB0cmViYSBtaSBkYSBkb2RhbSByZWQgZGEgcHJpa2F6dWplIHRhY251IGtvbWJpbmFjaWp1LCB6bmFjaSB0cmViYW0gZGEgcHJvdmVyaW0gaSBha29cclxuamUgdGFjbm8gcHJpa2F6dWplbSBpIGFrbyBqZSBicm9qIHJlZG92YSB2ZWNpIG9kIDUgb25kYSBwcmlrYXp1amVtIHN2YWtha28qLyIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJpbXBvcnQgR2FtZSBmcm9tICcuL21hcCc7XHJcblxyXG5cclxubGV0IGc9IG5ldyBHYW1lKCk7XHJcblxyXG5nLmdlbmVyYXRlTWFwKGRvY3VtZW50LmJvZHkpO1xyXG4iXSwibmFtZXMiOlsidGhpcyIsImJyb2pldmkiLCJpIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwicG9rdXNhaiIsIm5peiIsInZyZWRub3N0IiwiZGFqQm9qZSIsImtvbmFjbmlOaXoiLCJwb21vY25pTml6IiwiYm9qZU1hcGEiLCJSYW5kb21abmFjaSIsImN1cnJSb3ciLCJrb21iaW5hY2lqYSIsImdlbmVyYXRlTWFwIiwiY29udGFpbmVyIiwicmVkIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwicmVkRGVzbm8iLCJqIiwicG9samVTbGlrYSIsInNyYyIsImFkZEV2ZW50TGlzdGVuZXIiLCJvYnJpc2kiLCJhcHBlbmRDaGlsZCIsImd1ZXNzIiwic3R5bGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJyZWRMZXZvIiwicG9iZWRhUG9samUiLCJ6bmFrb3ZpIiwiaW1hZ2UiLCJkb2RhaiIsImJ0bkNvbnRhaW5lciIsIlBvZ2FkamFqIiwidGV4dENvbnRlbnQiLCJwb2dhZGphaiIsIm5vdmFJZ3JhIiwicmVzZXQiLCJlbCIsImZpcnN0Q2hpbGQiLCJ0cmVuUmVkIiwicXVlcnlTZWxlY3RvciIsImNoaWxkcmVuIiwibGVuZ3RoIiwiZ2V0QXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwiY2xhc3NOYW1lIiwic3BsaXQiLCJjaGVja2VyIiwidHJlbnV0bmlSZWQiLCJwdXNoIiwicGFyc2VJbnQiLCJvYm9qaSIsInByaWthemlLb21iaW5hY2lqdSIsImNvbnNvbGUiLCJsb2ciLCJuaXpCb2phIiwiZ3Vlc3NSZWQiLCJjb2xvckNvdW50ZXIiLCJ6bmFrb3ZpUG9samEiLCJxdWVyeVNlbGVjdG9yQWxsIiwicG9iZWRhUG9samEiLCJmb3JFYWNoIiwiZWxlbWVudCIsInBhcmVudEVsZW1lbnQiLCJjb250YWlucyIsInBvbGplIiwiaW5kZXgiLCJnZW5lcmF0ZVRpbWVyIiwiZHJ1Z2lDb250IiwiYmVsaURpdiIsInBsYXZpRGl2IiwiekluZGV4IiwidHJhbnNmb3JtIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJib2R5Il0sInNvdXJjZVJvb3QiOiIifQ==